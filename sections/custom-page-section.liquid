<link rel="stylesheet" href="{{ 'custom-style.css' | asset_url }}">
<section class="custom-page">
  <h1>{{ section.settings.title }}</h1>
  <p>{{ section.settings.description }}</p>
  <button id="load-products">加载产品</button>
  <ul id="product-list"></ul>
</section>

<script>
  document.addEventListener('DOMContentLoaded', function () {
    const button = document.getElementById('load-products');
    const productList = document.getElementById('product-list');

    if (button) {
      button.addEventListener('click', function () {
        fetch('/products.json')
          .then((response) => response.json())
          .then((data) => {
            productList.innerHTML = ''; // 清空列表
            data.products.forEach((product) => {
              const li = document.createElement('li');
              li.innerHTML = `${product.title} - $${product.price[0]}`;
              console.log('我的产品: ', product);
              productList.appendChild(li);
            });
          })
          .catch((error) => console.error('加载产品失败:', error));
      });
    }
  });
</script>

{% schema %}
{
  "name": "我新建是section",
  "settings": [
    {
      "type": "text",
      "id": "title",
      "label": "标题",
      "default": "自定义页面"
    },
    {
      "type": "textarea",
      "id": "description",
      "label": "描述",
      "default": "这是一个学习 Shopify 主题结构的页面"
    }
  ],
  "presets": [
    {
      "name": "Custom Page Section"
    }
  ]
}
{% endschema %}
